<!DOCTYPE html>
<html lang="pt-br"> <head>
        <meta charset="UTF-8">
        <title>Meu Dashboard QuickSight</title>
        <!-- SDK de embedding do QuickSight-->
        <script src="https://unpkg.com/amazon-quicksight-embedding-sdk@2.0.0/dist/quicksight-embedding-js-sdk.min.js"></script>
        <style>
            #dashboardContainer { width: 100%; height: 800px; }
        </style>
    </head>
    <body>
        <h1>Análise de Dados</h1>
        <div id="dashboardContainer"></div>

        <script>
            async function embedDashboard() {
                try {
                    // 1. Chama sua API Gateway
                    const response = await fetch('https://9sjzl0husi.execute-api.us-east-1.amazonaws.com/get-url');
                    const data = await response.json();
                    
                    const containerDiv = document.getElementById("dashboardContainer");
                    
                    // 2. Configura o embedding com Locale PT-BR
                    const options = {
                        url: data.embedUrl,
                        container: containerDiv,
                        height: "100%",
                        width: "100%",
                        // Adicionando a tradução dos controles do QuickSight (filtros, menus, etc)
                        locale: "pt-BR" 
                    };
                    
                    // 3. Renderiza
                    const embeddingContext = await QuickSightEmbedding.createEmbeddingContext();
                    await embeddingContext.embedDashboard(options);
                } catch (error) {
                    console.error("Erro ao carregar o dashboard:", error);
                }
            }

            window.onload = embedDashboard;
        </script>
    </body>
</html>